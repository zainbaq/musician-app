<html>
<head>
	<link href="css/style.css" rel="stylesheet" type="text/css">
	<title>Music App</title>

	<script src="soundmanager2.js"></script>
	<script src="../public/js/metronome.js" type="text/javascript"></script>
</head>
<body>
<header>
	
    <div class="container">
		
        <img src="../assets/img/clef.png" alt="logo" class="logo">

        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                {{!-- <li><a href="tools">Tools</a></li> --}}
                <li><a href="/about">About</a></li>
                <li><a href="/login">Login</a></li>
                {{!-- <li><a href="#">Sign Up</a></li> --}}

            </li>
            </ul>
        </nav>
    </div>
</header>

<h2>
	<div class="jumbotron">
		<p>Metronome</p>
	</div>
</h2>

<form id="bpm">
	BPM: <input type="text" name="bpm_val" id="bpm_val"><br>
	<button class="met-buttons" type="button" id="start-button"
	onclick="metronome()">Start</button>
	<button class="met-buttons" type="button" id="stop-button"
	onclick="stop()">Stop</button>
</form>

<div class="footer">
	<p> This application is being developed to aid musicians on the quest to creative glory.</p>
</div>

</body>
<script>

    const metronome_tick = new Audio('/public/assets/audio/metronome_sound.mp3');
    met = setTimeout();
    function stop() {
        clearTimeout(met);
    };
    function metronome() {
        var bpm = document.getElementById("bpm_val").value;
        var ticks_per_second = bpm/60;
        met(metronome_tick.play(), ticks_per_second*1000);
    };

    document.getElementById("start-button").onclick = metronome();
    document.getElementById("stop-button").onclick = stop();
</script>
</html>
